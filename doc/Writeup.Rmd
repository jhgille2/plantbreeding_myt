---
title: "Untitled Draft"
author: "Report Author"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
## target knits Rmds in their own session, so load libraries here.
## source("here::here(packages.R"))
```

```{r load-targets, include=FALSE}
# tar_load(c(target_1, target_2, target_3))

# # If your chunk output is shown in-line, then you'll need to wrap tar_load()
# # like so:
# 
# withr::with_dir(here::here(), {
#   tar_load(c(target_1, target_2, target_3))
# })
# 
# # This is not needed when using tar_make() to render the document.
```

## Introduction
Many large-scale agricultural research programs involve many parallel experiments that all share an experimental design. This is especially true in plant breeding programs where often lines will be grown in separate tests within the same year, and often in the same environments that all share a common experimental design. Once it comes time to analyse the data obtained from these experiments, a practitioner will typically have to fit the same statistical model on many of these experiments, and obtain the same summary data from these models. There are many ways which this analysis can be conducted. One way is to create separate data sets for each experiment, and fit a unique model to each of these data sets. However, even with a modest breeding program, the number of models to be fit quickly increases and along with it, the difficulty in managing the analysis workflow. 

What is needed is a better data and analysis structure to both efficiently analyse the data at hand, and reduce the mental overhead of performing the analysis. Here, I'll show how making use of nested data frames and a little functional programming can make this task trivial

## Reproducibility

<details><summary>Reproducibility receipt</summary>

```{r}
## datetime
Sys.time()

## repository
if(requireNamespace('git2r', quietly = TRUE)) {
  git2r::repository()
} else {
  c(
    system2("git", args = c("log", "--name-status", "-1"), stdout = TRUE),
    system2("git", args = c("remote", "-v"), stdout = TRUE)
  )
}

## session info
sessionInfo()
```

</details>
